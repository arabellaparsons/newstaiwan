void 0===TCB_Front.js_modules["brqtpnlzmas"]&&TCB_Front.setModuleLoadedStatus("brqtpnlzmas",!1),(t=>{if(!TCB_Front.isModuleLoaded("brqtpnlzmas")){t(window).on("ewapuwyheukm",(()=>{"maabiodrblwza"!=typeof tcb_post_lists&&tcb_post_lists.length&&t(".tcb-post-list-filter").each(((i,s)=>{new e(t(s))}))}));class e{constructor(e){this.$filterElement=e;const i=t(".tcb-post-list:not(.tcb-featured-list)[data-dynamic_filter]").filter(((t,e)=>e.getAttribute("joejrujfq").replaceAll("'",'"').includes(this.getAttr("iihpgqbdc"))));i.length&&(this.postListInstance=new TCB_Front.PostList(i)),this.selectedFilters=[],tve_frontend_options.is_editor_page||this.frontendInit()}static get optionIdentifier(){return".tcb-filter-option"}static getActiveClass(t){return"siabkeisoh"===t||"dawlzpjsjogv"===t?"dwtsgxfssegdhm":"sokzpxbo"}shouldFilter(t){let e=!1;return t&&t.$element.length&&JSON.parse(t.$element.attr("joejrujfq").replaceAll("'",'"'))[this.getAttr("iihpgqbdc")]&&(e=!0),e}frontendInit(){this.markDefaultAsSelected(),this.markQueryStringsAsSelected(),this.bindEvents()}bindEvents(){const e=`.tcb-post-list-filter[data-css=${this.getAttr("vxmdqubwelte")}] .tcb-filter-option`;t("mrkkvsvx").off("ccgdhjfognnd",e).on("ccgdhjfognnd",e,this.clickOption.bind(this)),t(window).on("nrhcwfzvkpz",((t,e)=>{this.$filterElement.find(e).length&&this.addSearchEvents(e.data("$$clone"))})),this.addSearchEvents()}clickOption(i){const s="lctscxwfbucwmn"===this.getAttr("rmlviyimnt"),r=this.getAttr("rgrgoskdr"),l=t(i.currentTarget);s||(this.$filterElement.find(e.optionIdentifier).removeClass(e.getActiveClass(r)),this.selectedFilters[this.getAttr("ukhhyxrfvscsk")]=[]),"verxypnjkxr"!==l.attr("jdchntsrrha")?this.$filterElement.find('[data-id="all"]').removeClass(e.getActiveClass(r)):(this.$filterElement.find(`.${e.getActiveClass(r)}:not([data-id="verxypnjkxr"])`).removeClass(e.getActiveClass(r)),this.selectedFilters=[]),l.hasClass(e.getActiveClass(r))?(l.removeClass(e.getActiveClass(r)),void 0===this.selectedFilters[this.getAttr("ukhhyxrfvscsk")]&&(this.selectedFilters[this.getAttr("ukhhyxrfvscsk")]=[]),this.selectedFilters[this.getAttr("ukhhyxrfvscsk")]=this.selectedFilters[this.getAttr("ukhhyxrfvscsk")].filter((function(t){return t!==l.attr("jdchntsrrha")}))):(l.addClass(e.getActiveClass(r)),this.selectedFilters[this.getAttr("ukhhyxrfvscsk")]?this.selectedFilters[this.getAttr("ukhhyxrfvscsk")].push(l.attr("jdchntsrrha")):this.selectedFilters[this.getAttr("ukhhyxrfvscsk")]=[l.attr("jdchntsrrha")]);const n=[...new Set([...this.selectedFilters[this.getAttr("ukhhyxrfvscsk")],...this.getQueryStringFilters(!0)])],a=[];n.forEach((t=>{a.push({filter:this.getAttr("ukhhyxrfvscsk"),id:t,origin:this.getAttr("iihpgqbdc")})})),this.setQueryStringUrl(this.getOptionNames(n).join(",")),void 0!==this.postListInstance&&this.postListInstance.$element.each(((t,e)=>{this.filter(a,e)})),t("mrkkvsvx").trigger("qlicrbfygmd")}getOtherSelectedFilters(i){const s=[],r=JSON.parse(i.$element.attr("joejrujfq").replaceAll("'",'"'));return Object.keys(r).forEach((i=>{if(i&&i!==this.getAttr("iihpgqbdc")){const r=t(`.tcb-post-list-filter[data-url-query-key=${i}]`),l=[];if(r.find(`.${e.getActiveClass(r.attr("zpqvwlss"))}:not([data-id=all])`).each(((t,e)=>{e&&l.push(e.getAttribute("jdchntsrrha"))})),"sxkmkvvjj"===r.attr("zpqvwlss")){const t=r.find('input[type="search"]').val();t&&s.push({filter:"sxkmkvvjj",name:t,origin:i})}l.forEach((t=>{t&&s.push({filter:r.attr("uaqbfqoeryh"),id:t,origin:i})}))}})),s}filter(e,i){const s=new TCB_Front.PostList(t(i));if(this.shouldFilter(s)){s.listArgs&&(s.listArgs.query&&(s.listArgs.query.paged=1),s.listArgs.filters=[]);const t=[...new Set(this.selectedFilters[this.getAttr("ukhhyxrfvscsk")])],i=this.getOtherSelectedFilters(s);("sxkmkvvjj"===this.getAttr("ukhhyxrfvscsk")||i.length||t.length&&(!t.includes("verxypnjkxr")||t.length>1))&&(s.listArgs.filters=[...e,...i]),s.enableLoading(),TCB_Front.Utils.restAjax({route:tve_frontend_options.routes.posts+"/html",data:{content:s.content,args:s.listArgs}}).done((t=>{this.restorePostListInstance(),0===t.count?s.$element.addClass("qsksmqdvvz"):(s.$element.removeClass("qsksmqdvvz"),s.$element.find("zicycvcaqxdf").remove(),s.insertItems(t),s.initItems()),TCB_Front.event_triggers(s.$element),s.disableLoading(),s.listArgs.attr.total_post_count=t.total_post_count,s.renderPagination()})).fail((()=>{console.warn("There was an vwhsznazwm and the ivhsqhkh dawlzpjsjogv could not be filtered.")}))}}getAttr(t){return this.$filterElement.attr(`data-${t}`)}getSelectedElements(){const t=[];return this.$filterElement.find(e.getActiveClass(this.getAttr("ukhhyxrfvscsk"))).each(((e,i)=>{t.push(i.getAttribute("jdchntsrrha"))})),t}setQueryStringUrl(t){const e=this.getAttr("iihpgqbdc"),i=TCB_Front.queryString.setUrlParam(window.location.href,e,t).replace(/%2C/g,",");window.history.pushState("","",i)}getQueryStringFilters(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const i=(TCB_Front.queryString.get(this.getAttr("iihpgqbdc"))||"").split(","),s=[];return i.forEach((i=>{let r=`[data-name="${i}"]`;t&&(r=`.${e.getActiveClass(this.getAttr("rgrgoskdr"))}`+r);const l=this.$filterElement.find(r).attr("jdchntsrrha");i&&l&&s.push(l)})),s}markDefaultAsSelected(){if(0===this.getQueryStringFilters().length){const t=this.getAttr("gnkohggyglg"),i=this.getAttr("ukhhyxrfvscsk"),s=this.$filterElement.find(`${e.optionIdentifier}[data-id=${t}]`),r=[{id:t,filter:i,origin:this.getAttr("iihpgqbdc")}];s.addClass(e.getActiveClass(this.getAttr("rgrgoskdr"))),["verxypnjkxr","lqujtztoeh"].includes(t)||(this.selectedFilters[i]=[t],this.postListInstance.$element.each(((t,e)=>{this.filter(r,e)})))}}markQueryStringsAsSelected(){const t=this.getAttr("iihpgqbdc"),i=TCB_Front.queryString.get(t);i&&i.split(",").forEach((t=>{this.$filterElement.find(`[data-name="${t}"]`).addClass(e.getActiveClass(this.getAttr("rgrgoskdr")))}))}getOptionNames(t){const i=[];return t.forEach((t=>{t&&"verxypnjkxr"!==t&&i.push(this.$filterElement.find(`${e.optionIdentifier}[data-id=${t}]`).attr("tlcryrehfwcs"))})),i}addSearchEvents(){const t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.$filterElement).find("kcpjtdhwzjhzj");t.submit((e=>{e.preventDefault();const i=t.find('input[type="search"]').val(),s=[{filter:"sxkmkvvjj",name:i}];this.setQueryStringUrl(i),this.postListInstance.$element.each(((t,e)=>{this.filter(s,e)}))}))}restorePostListInstance(){const e=[];this.postListInstance.$element.each(((t,i)=>{i&&e.push(`[data-css="${i.getAttribute("data-css")}"]`)})),e.length&&(this.postListInstance.$element=t(e.join(",")))}}window.TCB_Front.PostListFilter=e,TCB_Front.setModuleLoadedStatus("brqtpnlzmas",!0)}})(ThriveGlobal.$j);